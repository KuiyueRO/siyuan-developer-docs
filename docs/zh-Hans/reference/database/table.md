---
outline: deep
---

# 数据库表与字段

思源在运行时会维护一个 SQLite 数据库用来存储笔记的所有数据, 可以通过 SQL 语句来访问内部数据。以下是数据表的定义格式。

## `blocks`

存储了所有的内容块数据。

| 字段名      | 说明                                               | 字段值示例                                                                 |
| ----------- | -------------------------------------------------- | -------------------------------------------------------------------------- |
| `id`        | 内容块 ID                                          | `20210104091228-d0rzbmm`                                                   |
| `parent_id` | 上级块的 ID，文档块该字段为空                      | `20200825162036-4dx365o`                                                   |
| `root_id`   | 顶层块的 ID，即文档块 ID                           | `20200825162036-4dx365o`                                                   |
| `hash`      | `content` 字段的 SHA256 校验和                     | `a75d25c`                                                                  |
| `box`       | 笔记本 ID                                          | `20210808180117-czj9bvb`                                                   |
| `path`      | 内容块所在文档路径                                 | `/20200812220555-lj3enxa/20210808180320-abz7w6k/20200825162036-4dx365o.sy` |
| `hpath`     | 人类可读的内容块所在文档路径                       | `/0 请从这里开始/编辑器/排版元素`                                          |
| `name`      | 内容块名称                                         | `一级标题命名`                                                             |
| `alias`     | 内容块别名                                         | `一级标题别名`                                                             |
| `memo`      | 内容块备注                                         | `一级标题备注`                                                             |
| `tag`       | 非文档块为块内包含的标签，文档块为文档的标签       | `#标签1# #标签2# #标签3#`                                                  |
| `content`   | 去除了 Markdown 标记符的文本                       | `一级标题`                                                                 |
| `fcontent`  | 第一个子块去除了 Markdown 标记符的文本(1.9.9 添加) | `第一个子块`                                                               |
| `markdown`  | 包含完整 Markdown 标记符的文本                     | `# 一级标题`                                                               |
| `length`    | `fcontent` 字段文本长度                            | `6`                                                                        |
| `type`      | 内容块主类型，参考 [blocks.type](#blocks-type)     | `h`                                                                        |
| `subtype`   | 内容块次类型，参考 [blocks.subtype](#blocks-type)  | `h1`                                                                       |
| `ial`       | 内联属性列表，形如 `{: name="value"}`              | `{: id="20210104091228-d0rzbmm" updated="20210604222535"}`                 |
| `sort`      | 排序权重，数值越小排序越靠前                       | `5`                                                                        |
| `created`   | 创建时间                                           | `20210104091228`                                                           |
| `updated`   | 更新时间                                           | `20210604222535`                                                           |

### `blocks.type`

块主类型

| 字段值        | 说明      |
| ------------- | --------- |
| `audio`       | 音频块    |
| `av`          | 属性表    |
| `b`           | 引述块    |
| `c`           | 代码块    |
| `d`           | 文档块    |
| `h`           | 标题块    |
| `html`        | HTML 块   |
| `i`           | 列表项    |
| `iframe`      | IFrame 块 |
| `l`           | 列表块    |
| `m`           | 公式块    |
| `p`           | 段落块    |
| `query_embed` | 嵌入块    |
| `s`           | 超级块    |
| `t`           | 表格块    |
| `tb`          | 分割线    |
